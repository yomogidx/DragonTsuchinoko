using UnityEngine;
using UnityEngine.UI;
using TMPro;

//--------------------------------------------------------------------
//  GameScoreクラス
//  スコア表示の更新処理
//--------------------------------------------------------------------
public class GameScore : MonoBehaviour
{
    //--------------------------------------------------------------------
    //  シングルトン
    //--------------------------------------------------------------------
    public static GameScore Instance { get; private set; }

    //--------------------------------------------------------------------
    //  フィールド
    //--------------------------------------------------------------------
    [Tooltip("スコア")]
    private int Score = 0;
    [Tooltip("スコア表示用のオブジェクト")]
    public TextMeshProUGUI ScoreText;

    //--------------------------------------------------------------------
    //  初期化処理
    //--------------------------------------------------------------------
    void Start()
    {
        
    }

    //--------------------------------------------------------------------
    //  更新処理
    //--------------------------------------------------------------------
    void Update()
    {

    }

    //--------------------------------------------------------------------
    //  初期化処理（ゲームオブジェクトがアクティブになったとき）
    //--------------------------------------------------------------------
    void Awake()
    {
        // シングルトンの初期化
        if (Instance != null && Instance != this)
        {
            Destroy(gameObject); // 重複を防ぐ
        }
        else
        {
            Instance = this;
            //DontDestroyOnLoad(gameObject); // シーンをまたいでも保持したい場合
        }
    }

    //--------------------------------------------------------------------
    //  スコアの加算
    //--------------------------------------------------------------------
    public void AddScore(int amount)
    {
        Score += amount;
        UpdateScoreUI();
    }

    //--------------------------------------------------------------------
    //  スコアの取得
    //--------------------------------------------------------------------
    public int GetScore()
    {
        return Score;
    }

    //--------------------------------------------------------------------
    //  スコアの更新
    //--------------------------------------------------------------------
    private void UpdateScoreUI()
    {
        ScoreText.text = ((int)Score).ToString();
    }
}
